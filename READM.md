# Discount Service

A Spring Boot RESTful service for managing discounts and users, and applying discount logic to bills. The service uses MongoDB for data storage and supports secure authentication (see below for details).


## Prerequisites

- Docker installed on your machine. [Download link](https://www.docker.com/get-started).
- JDK 21 or higher [Download link](https://www.oracle.com/java/technologies/downloads/#java21).
- HTTP client such as Postman [Download link](https://www.postman.com/downloads/).
- Maven 3.8 or higher â€” [Download link](https://maven.apache.org/download.cgi).

## Project Documentation

All project documentation is located in the `docs/` directory. This includes:
- **Class Diagram:** Visual representation of the main classes and their relationships.
- **Swagger API Documentation:** OpenAPI specification for all REST endpoints.
- **Postman Collection:** Example requests for testing the API with Postman.
- **Tests Coverage Report:** Generated by IntelliJ found in `htmlReport/index.html`.

## Features
- Manage discounts (CRUD)
- Manage users (CRUD)
- Apply discount logic to bills
- RESTful API endpoints
- Docker support for easy deployment

## Quick Start

1. **Clone the repository**
2. **Configure MongoDB** (see `application.yml` for connection details)
3. **Build and Run the project:**
   - The service will be available at** `http://localhost:8080`
   ```sh
   docker compose up -d --build
   ```
  
4. **Run Maven Tests to Generate Jacoco Report found in target/site/jacoco/index.html:**
   ```sh
   mvn test
   ```
5. **Access API documentation:**
   - Swagger UI: `http://localhost:8080/swagger-ui.html`
   - Postman Collection: Import the provided Postman collection file located in the `docs/` directory.

## Authentication
- The service uses JWT (JSON Web Tokens) for secure authentication.
- There is a preRequest script in the Postman collection to help you obtain and use the JWT token you can edit it with one of the following credentials:
  - **Employee User:**
    - Username: `employee`
    - Password: `emp@password`
  - **Affiliate User:**
    - Username: `affiliate`
    - Password: `aff@password`
  - **Customer User:**
    - Username: `customer`
    - Password: `cust@password`
- All the above users are pre-created in the database when the application starts.

## Author
- **Author:** Saleh Alshaikhi
- **Contact:** shaikhisaleh@gmail.com

Thank you for using this application!